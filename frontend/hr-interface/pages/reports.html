<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Reports | AI Resume Screener</title>

  <!-- ✅ Common Styles -->
  <link rel="stylesheet" href="../styles/sidebar.css" />
  <link rel="stylesheet" href="../styles/navbar.css" />
  <link rel="stylesheet" href="reports.css" />

  <!-- ✅ Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  <!-- Sidebar -->
  <div id="sidebar"></div>

  <!-- Main Content -->
  <div class="main-content">
    <div id="navbar"></div>

    <section class="reports-section">
      <h1>Reports & Analytics</h1>
      <p class="subtitle">Generate insights based on job roles and date range.</p>

      <!-- Filters -->
      <div class="filters">
        <label for="jobSelect">Job Role:</label>
        <select id="jobSelect">
          <option value="">Select Role</option>
          <option value="frontend">Frontend Developer</option>
          <option value="backend">Backend Developer</option>
          <option value="data">Data Analyst</option>
        </select>

        <label for="fromDate">From:</label>
        <input type="date" id="fromDate" />

        <label for="toDate">To:</label>
        <input type="date" id="toDate" />

        <button id="generateReport">Generate Report</button>
      </div>

      <!-- Charts -->
      <div id="chartsContainer" class="charts-container hidden">
        <div class="chart-card">
          <h3>Match Percentage</h3>
          <canvas id="matchChart"></canvas>
        </div>

        <div class="chart-card">
          <h3>Experience Distribution</h3>
          <canvas id="experienceChart"></canvas>
        </div>

        <div class="chart-card">
          <h3>Top Skills</h3>
          <canvas id="skillsChart"></canvas>
        </div>
      </div>
    </section>
  </div>

  <!-- Scripts -->
  <script src="reports.js"></script>
  <script>
    // ✅ Load sidebar and navbar dynamically
    Promise.all([
      fetch("../components/sidebar.html").then(res => res.text()),
      fetch("../components/navbar.html").then(res => res.text())
    ]).then(([sidebarHTML, navbarHTML]) => {
      document.getElementById("sidebar").innerHTML = sidebarHTML;
      document.getElementById("navbar").innerHTML = navbarHTML;

      if (typeof initSidebarToggle === "function") initSidebarToggle();

      // Highlight the active page
      const currentPath = window.location.pathname;
      document.querySelectorAll(".menu-link").forEach(link => {
        if (currentPath.includes(link.getAttribute("href").split("/").pop())) {
          link.classList.add("active");
        }
      });
    });
  </script>
</body>
</html>
